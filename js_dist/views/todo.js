define(["backbone","jquery","underscore","localStorage"],function(e,t,n){var o='        <div class="view">            <input class="toggle" type="checkbox" <%= done ? "checked" : "" %>>            <label><%- content %></label>                <button class="destroy"></button>            </div>                <input class="edit" value="<%- content %>">        ',i=e.View.extend({tagName:"li",template:n.template(o),events:{"click label":"handleClickTodo","blur .edit":"handleBlurTodo","change .toggle":"handleCheck","click .destroy":"del"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){var e=this.model.get("done");e?this.$el.addClass("completed"):this.$el.removeClass("completed");var t=this.model.toJSON();return this.$el.html(this.template(t)),this},handleClickTodo:function(){this.$el.siblings("li").removeClass("editing").end().addClass("editing").find(".edit").focus()},handleBlurTodo:function(){var e=this.$el.find(".edit").val();this.$el.removeClass("editing"),this.updateContent(e)},updateContent:function(e){this.model.save("content",t.trim(e))},handleCheck:function(e){var t=e.currentTarget.checked;this.model.save("done",t)},del:function(){this.model.destroy()}});return i});